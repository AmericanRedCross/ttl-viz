<fieldset>
	<legend>Asset Details</legend>
	<div class="form-group">
		<label for="date">Date</label>
		<input type="date" class="form-control" id="date" name="date" value="{{formatDate date 'YYYY-MM-DD'}}" required>
	</div>
	<div class="form-group">
		<label for="title">Title</label>
		<input type="text" class="form-control" name="title" id="title" value="{{title}}" required>
	</div>
	<div class="form-group">
		<label for="description">Description</label>
		<textarea class="form-control" name="description" id="description" required>{{description}}</textarea>
	</div>
	<div class="form-group">
	  <div class="checkbox">
	    <label><input type="checkbox" name="published" id="published" value="true" {{#if published}}checked{{/if}} > Published</label>
	  </div>
	</div>

</fieldset>
<fieldset>
	<legend>Attributes</legend>
	<!-- <div class="col-md-6">
		<div class="form-group">
			<div class="checkbox">
				<label><input type="checkbox" name="public" id="public" value="true" {{#if public}}checked{{/if}}> Public</label>
			</div>
		</div>
	</div> -->
	<div class="col-md-4">
		<div class="form-group">
			<label for="category">Category</label>
			{{#each opts.categories}}
				<div class="category-radio">
					<div><input type="radio" name="category" value="{{@key}}" {{#if @first}} checked{{/if}}{{#eq ../category @key}} checked{{/eq}} required> {{@key}}</div>
				</div>
			{{/each}}
		</div>
	</div>
	<div class="col-md-4">
		<div class="form-group">
			<label for="category">Group</label>
			{{#each opts.categories}}
				{{#each this}}
					<div class="group-radio" data-category="{{@key}}" >
						<div><input type="radio" name="group" value="{{this}}" {{#eq ../../group this}} checked{{/eq}} required> {{this}} </div>
					</div>
				{{/each}}
			{{/each}}
		</div>
	</div>
	<div class="col-md-4">
		<div class="form-group">
			<label for="type">Type</label>
			{{#each opts.types}}
				<div class="">
					<div><input type="radio" name="type" value="{{this}}" {{#if @first}} checked{{/if}}{{#eq ../type this}} checked{{/eq}} required> {{this}}</div>
				</div>
			{{/each}}
		</div>
	</div>
</fieldset>

<fieldset>
	<legend>Resource</legend>
	<div class="form-group" id="form-file">
		{{#if file}}<p><b>Current:</b> <em>{{#if filename}}{{filename}}{{else}}{{file}}{{/if}}</em></p>{{/if}}
		{{#if thumbnail}}<p><img src="api/asset/{{_id}}/thumbnail/200"></p>{{/if}}
		<label for="file">{{#if file}}Replace{{else}}Upload{{/if}} File</label>
		<input type="file" class="form-control" name="file" id="file" size="50">
	</div>

</fieldset>

<script>

$('input[name=category]').change(function(){
	groups();
})

function groups(){
	var currentCat = $('input[name=category]:checked').val();
	$(".group-radio").each(function(i,a){
		if($(a).data('category') === currentCat) {
			$(a).show();
			$(a).addClass('option');
		} else {
			$(a).hide();
			$(a).removeClass('option');
			$(a).find('input').prop('checked',false);
		}
	});
	if($('input[name=group]:checked').val() === undefined){
		$($(".group-radio.option")[0]).find('input').prop('checked',true);
	}
}
groups();

</script>
